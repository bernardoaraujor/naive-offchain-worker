use sp_keyring::AccountKeyring;
use subxt::{tx::PairSigner, OnlineClient, PolkadotConfig};

#[subxt::subxt(runtime_metadata_path = "metadata.scale")]
pub mod substrate {}

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    tracing_subscriber::fmt::init();

    let alice_signer = PairSigner::new(AccountKeyring::Alice.pair());
    let dest = AccountKeyring::Bob.to_account_id().into();

    let api = OnlineClient::<PolkadotConfig>::new().await?;

    let tx = substrate::tx().balances().transfer(dest, 123_456);

    let hash = api.tx().sign_and_submit_default(&tx, &alice_signer).await?;

    println!("Balance tx: {hash}");

    Ok(())
}

